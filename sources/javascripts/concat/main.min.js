!function(e){var o=e("html").hasClass("editmode"),t=e("body").hasClass("bgpicker-fallback"),a=function(e,o,t){var a;return function(){var s=this,n=arguments,i=function(){a=null,t||e.apply(s,n)},r=t&&!a;clearTimeout(a),a=setTimeout(i,o),r&&e.apply(s,n)}},s=function(){e("html").click(function(){e(".js-btn").hasClass("open")&&e(".js-btn").removeClass("open"),e(".js-popover").hasClass("expanded")&&e(".js-popover").removeClass("expanded"),e(".js-search-inner").hasClass("active")&&e(".js-search-inner").removeClass("active")}),e(".js-menu-btn").click(function(o){o.stopPropagation(),e(this).toggleClass("open"),e(".js-menu-main").toggleClass("expanded"),e(".js-search-close-btn").hasClass("open")&&e(".js-search-close-btn").trigger("click")}),e(".js-menu-lang-btn").click(function(o){o.stopPropagation(),e(".js-menu-lang-btn").toggleClass("open"),e(".js-menu-lang").toggleClass("expanded")}),e(".js-tags-btn").click(function(o){o.stopPropagation(),e(this).toggleClass("open"),e(".js-menu-tags").toggleClass("expanded")}),e(".js-search").click(function(){e(".js-search-close-btn").trigger("click")}),e(".js-search-open-btn").click(function(o){o.stopPropagation(),e(".js-menu-btn").hasClass("open")&&e(".js-menu-btn").trigger("click"),e("html").addClass("search-open"),e(this).addClass("open"),e(".js-search-close-btn").addClass("open"),e(".js-search").addClass("active"),e(".js-search-input").val("").focus()}),e(".js-search-close-btn").click(function(o){o.stopPropagation(),e("html").removeClass("search-open"),e(".js-search-open-btn, .js-search-close-btn").removeClass("open"),e(".js-search").removeClass("active"),e(".js-voog-search-modal").removeClass("search-results-active")}),e(".js-search-form, .js-voog-search-modal").click(function(e){e.stopPropagation()})},n=function(){var o=e(window).width();windowHeight=e(window).height(),searchModal=e(".js-voog-search-modal"),searchModalHeight=o>=1400?windowHeight-190:windowHeight-171,searchModal.css({"max-height":searchModalHeight})},i=function(){e(".js-search-form").on("submit",function(){n()})},r=function(){e(document).ready(function(){e(".comment-form").hasClass("form_with_errors")?e("html, body").scrollTop(e(".comment-form").offset().top):e("form").find(".form_error, .form_notice").length>0&&e("html, body").scrollTop(e(".form_error, .form_notice").closest("form").offset().top)})},c=function(){var o,t,a,s=(e(".js-container"),e(".js-topbar")),n=e(".js-header"),i=e(".js-menu-tags"),r=e(s).outerHeight(),c=e(n).outerHeight()+150;e(i).outerHeight();e(s).css({top:-r}),e(window).on("scroll",function(){e(window).scrollTop()<=0&&e(s).css({top:-r}),o?(t=e(window).scrollTop(),a=t-o,a<-5&&o>c?(e("body").hasClass("edy-checkout-button-visible")?headerOffset=e(".edy-ecommerce-shopping-cart-button").outerHeight():headerOffset=0,e(s).css({top:headerOffset})):(a<0&&o<c||a>0&&o>c)&&(i.hasClass("expanded")&&(e(i).removeClass("expanded"),e(".js-tags-btn").removeClass("open")),e(s).css({top:-r})),o=0):o=e(window).scrollTop()})};handleLayoutPositioning=function(){var t=e(".js-container");containerWrap=t.find(".js-wrap"),footer=e(".js-footer"),footerInner=e(".js-footer-inner"),footerGradientHeight=85,editmodePanelHeight=40,windowHeight=windowHeight=o?e(window).height()-editmodePanelHeight:e(window).height(),brakePoint=2*footer.innerHeight()-footerGradientHeight+containerWrap.innerHeight(),brakePoint>windowHeight?t.addClass("container-long"):t.removeClass("container-long")};var d=function(){if(function(){for(var e=["WebKit","Moz","O","Ms",""],o=0;o<e.length;o++)if(e[o]+"MutationObserver"in window)return window[e[o]+"MutationObserver"];return!1}()){var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,o=document.querySelector(".js-wrap"),t={childList:!0,subtree:!0},a=document.querySelector(".js-footer-inner"),t={attributes:!0,childList:!0,subtree:!0},s=new e(function(e){e.forEach(function(e){handleLayoutPositioning()})});s.observe(o,t),s.observe(a,t)}else setInterval(function(){handleLayoutPositioning()},1e3)},l=function(){!1===o&&e.each(e(".content-formatted"),function(){e(this).hasClass("js-custom-content-formatted")||e(this).find("table").wrap('<div class="table-container overthrow"></div>')})},g=function(){if(color=e(".js-body-background-color").css("background-color"),"rgba(0, 0, 0, 0)"===color||"transparent"===color)e(document).ready(function(){e(".js-background-type").addClass("dark-background").removeClass("light-background"),e(".js-background-type").addClass("light-background").removeClass("dark-background")});else if(color){var o=function(e){if(e&&"string"==typeof e){var o=e.match(/(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*([\d\.]+)?\s*)/);return o?{r:+o[2],g:+o[3],b:+o[4],a:o[5]?+o[5]:1}:void 0}}(color),t=o.r+o.g+o.b,a=o.a;t+a>0&&t/3>128?e(".js-background-type").addClass("light-background").removeClass("dark-background"):e(".js-background-type").addClass("dark-background").removeClass("light-background")}},m=function(){e(".js-option-toggle-flags").on("click",function(o){if(o.stopPropagation(),e(this).hasClass("js-flag-disable-btn"))var t=!1;else var t=!0;e(this).toggleClass("js-flag-disable-btn"),e(".js-header").toggleClass("flags-enabled flags-disabled"),siteData.set("flags_state",t)})},h=function(e,o){for(var t,a=0,s=e.length;a<s;a++){if(e[a].width<o)return t||e[a];t=e[a]}return e[e.length-1]},u=function(e,o){for(var t=e.length;t--;)if(o.indexOf(e[t].url.trim())>-1)return!0;return!1},p=function(o,t){t>.6?e(o).find(".js-background-type").addClass("light-background").removeClass("dark-background"):e(o).find(".js-background-type").addClass("dark-background").removeClass("light-background")},f=function(o,t,a,s){var n=e(o).find(".js-background-image").css("background-image"),i=t.imageSizes?h(t.imageSizes,e(window).width()):null,r=t.image&&""!==t.image?"url("+i.url+")":"none",c=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,d=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",l=(t.colorData&&""!==t.colorData&&t.colorData.lightness,e("<img>")),g=e("<canvas>"),m=t.image&&""!==t.image?t.image:null;m?u(c,n)?(a.imageColor=a.imageColor?a.imageColor:s,a.combinedLightness=w(a.imageColor,d),p(o,a.combinedLightness)):(l.attr("src",m.replace(/.*\/(photos|voogstock)/g,"/photos")),l.on("load",function(){ColorExtract.extract(l[0],g[0],function(e){a.imageColor=e.bgColor?e.bgColor:"rgba(255,255,255,1)",a.combinedLightness=w(a.imageColor,d),p(o,a.combinedLightness)})})):(a.imageColor="rgba(255,255,255,1)",a.combinedLightness=w(a.imageColor,d),p(o,a.combinedLightness)),e(o).find(".js-background-image").css({"background-image":r}),e(o).find(".js-background-color").css({"background-color":d})},b=function(o,t,a,s){var n=e.extend(!0,{},t);n.image=t.image||"",n.imageSizes=t.imageSizes||"",n.color=t.color||"",n.combinedLightness=a.combinedLightness,"articlePage"===s?Edicy.articles.currentArticle.setData(o,n):pageData.set(o,n)},v=function(o,t){if(o&&t){"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(o,function(e,t){o[e]=+t})),"string"==typeof t&&(t=t.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(t,function(e,o){t[e]=+o})),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1),"object"==typeof t&&t.hasOwnProperty("length")&&3==t.length&&t.push(1);var a=[0,0,0,0];return a[3]=1-(1-t[3])*(1-o[3]),0===a[3]&&(a[3]=1e-6),a[0]=Math.min(t[0]*t[3]/a[3]+o[0]*o[3]*(1-t[3])/a[3],255),a[1]=Math.min(t[1]*t[3]/a[3]+o[1]*o[3]*(1-t[3])/a[3],255),a[2]=Math.min(t[2]*t[3]/a[3]+o[2]*o[3]*(1-t[3])/a[3],255),e.map(a,function(e){return Math.floor(e)})}},C=function(e,o){return v(e||[255,255,255,1],o||[255,255,255,1])},w=function(e,o){var t=C(e,o);return Math.round((.2126*+t[0]+.7152*+t[1]+.0722*+t[2])/2.55)/100},j=function(o){void 0!==o&&(o>.6?e(".header-wrapper").addClass("light").removeClass("dark"):e(".header-wrapper").addClass("dark").removeClass("light"))},y=function(){document.addEventListener("edicy:customstyles:change",function(e){var o=["--header-mainmenu-font-size","--header-mainmenu-line-height","--header-mainmenu-line-height","--font-two"];Object.keys(e.detail.changes).filter(function(e){return o.indexOf(e)>-1}).length>0&&c()})},k=function(){e(window).resize(function(){e(window).resize(a(c,500)),e(window).resize(a(handleLayoutPositioning,500)),e(window).resize(a(n,500))})},_=function(){},P=function(){c(),y()},x=function(){c(),y()},A=function(){c(),y()},H=function(){o()||T()},z=function(o){"show_product_related_pages_in_main_menu"in o||(o.show_product_related_pages_in_main_menu=!1),e(".js-root-item-settings-toggle").each(function(t,a){new Edicy.SettingsEditor(a,{menuItems:[{titleI18n:"show_in_main_menu",type:"checkbox",key:"show_product_related_pages_in_main_menu",states:{on:!0,off:!1}}],buttonTitleI18n:"settings",values:o,containerClass:["js-root-item-settings-popover","js-prevent-sideclick"],preview:function(o){!0==!o.show_product_related_pages_in_main_menu?e(".js-menu-item-products").addClass("is-hidden"):e(".js-menu-item-products").removeClass("is-hidden")},commit:function(e){siteData.set("settings_root_item",e)}})})},M=function(o){e(".js-content-item-img-drop-area").each(function(t,a){var s=e(a),n=s.closest(".js-content-item-box"),i=n.data("item-id"),r=n.data("item-type");new Edicy.CustomData({type:r,id:i}),new Edicy.ImgDropArea(s,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+o+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(e){var o;s.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),e?(o=e.original_id,n.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),L(n,e.width,e.height)):(o=null,n.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),n.find(".edy-img-drop-area-placeholder").css("opacity",0)),O(n,s,i,o,r)}})})},L=function(e,o,t){var a=e.find(".js-content-item-img-drop-area"),s=e.find(".js-toggle-crop-state");o>t?a.removeClass("image-landscape image-square image-portrait").addClass("image-landscape"):o===t?a.removeClass("image-landscape image-square image-portrait").addClass("image-square"):a.removeClass("image-landscape image-square image-portrait").addClass("image-portrait"),a.hasClass("image-square")?s.removeClass("is-visible").addClass("is-hidden"):s.removeClass("is-hidden").addClass("is-visible")},O=function(o,t,a,s,n){var i="article"===n?"articles":"pages",r=new Edicy.CustomData({type:n,id:a});e.ajax({type:"PATCH",contentType:"application/json",url:"/admin/api/"+i+"/"+a,data:JSON.stringify({image_id:s}),dataType:"json",success:function(e){r.set("image_crop_state","not-cropped"),o.removeClass("not-loaded with-error").addClass("is-loaded"),o.find(".edy-img-drop-area-placeholder").css("opacity",1),t.css("opacity",1)},timeout:3e4,error:function(e){o.removeClass("not-loaded is-loaded with-error").addClass("with-error")}})},S=function(){e(".js-toggle-crop-state").on("click",function(){var o,t=e(this).closest(".js-content-item-box"),a=t.find(".js-content-item-img-drop-area"),s=t.data("item-id"),n=t.data("item-type"),i=new Edicy.CustomData({type:n,id:s});a.hasClass("is-cropped")?(a.removeClass("is-cropped").addClass("not-cropped"),o="not-cropped"):(a.removeClass("not-cropped").addClass("is-cropped"),o="is-cropped"),i.set("image_crop_state",o)})},T=function(){e(document).ready(function(){setTimeout(function(){e(".js-content-item-box").addClass("not-loaded")},3e3)}),e(".js-lazyload").lazyload({threshold:500,effect:"fadeIn",placeholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",load:function(){var o=e(this).closest(".js-content-item-box");o.removeClass("not-loaded with-error").addClass("is-loaded"),setTimeout(function(){o.removeClass("not-loaded with-error"),o.find(".js-loader").remove()},3e3)}})},o=function(){return e("html").hasClass("editmode")};window.site=e.extend(window.site||{},{toggleFlags:m,bgPickerPreview:f,bgPickerCommit:b,bgPickerColorScheme:j,initFrontPage:_,initCommonPage:P,initBlogPage:x,initPostPage:A,initItemsPage:H,bindRootItemSettings:z,bindContentItemImgDropAreas:M,bindContentItemImageCropToggle:S,bindSiteSearch:bindSiteSearch}),function(){t&&g(),s(),handleLayoutPositioning(),d(),i(),r(),k(),l()}()}(jQuery);