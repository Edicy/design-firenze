var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var d,i,h,D,l,g;function m(){this.maxIterations=1e3,this.fractByPopulations=.75}return m.rshift=8-(m.sigbits=5),D=function(t,o,e){return(t<<2*m.sigbits)+(o<<m.sigbits)+e},d=function(){function t(t,o,e,n,r,s,i){this.r1=t,this.r2=o,this.g1=e,this.g2=n,this.b1=r,this.b2=s,this.histo=i}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,e,n,r,s,i,a,c,u,h,l;if(!this._count_set||t){for(r=0,s=i=this.r1,u=this.r2;i<=u;s=i+=1)for(e=a=this.g1,h=this.g2;a<=h;e=a+=1)for(o=c=this.b1,l=this.b2;c<=l;o=c+=1)n=D(s,e,o),r+=this.histo[n]||0;this._count_set=!0,this._count=r}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,e,n,r,s,i,a,c,u,h,l,g,f,d,p,b;if(!this._average||t){for(a=1<<8-m.sigbits,e=r=u=h=0,c=l=this.r1,d=this.r2;l<=d;c=l+=1)for(n=g=this.g1,p=this.g2;g<=p;n=g+=1)for(o=f=this.b1,b=this.b2;f<=b;o=f+=1)i=D(c,n,o),h+=s=this.histo[i]||0,u+=s*(c+.5)*a,r+=s*(n+.5)*a,e+=s*(o+.5)*a;this._average=h?[~~(u/h),~~(r/h),~~(e/h)]:[~~(a*(this.r1+this.r2+1)/2),~~(a*(this.g1+this.g2+1)/2),~~(a*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o,e,n;return n=t[0]>>m.rshift,e=t[1]>>m.rshift,o=t[2]>>m.rshift,this.r1<=n&&n<=this.r2&&this.g1<=e&&e<=this.g2&&this.b1<=o&&o<=this.b2},t}(),i=function(){function t(){this.cboxes=new PriorityQueue(function(t,o){var e,n;return e=t.count()*t.volume(),(n=o.count()*o.volume())<e?1:e<n?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var o,e,n;for(o=e=0,n=this.cboxes.size();e<n;o=e+=1)return this.cboxes.peek(o).cbox.contains(t)?this.cboxes.peek(o).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var o,e,n,r,s,i,a;for(s=function(t){return t*t},n=1e9,e=i=0,a=this.cboxes.size();i<a;e=i+=1)(o=Math.sqrt(s(t[0]-this.cboxes.peek(e).color[0])+s(t[1]-this.cboxes.peek(e).color[1])+s(t[2]-this.cboxes.peek(e).color[2])))<n&&(n=o,r=this.cboxes.peek(e).color);return r},t}(),l=function(t){var o,e,n,r,s,i,a,c;for(n=new Array(1<<3*m.sigbits),a=0,c=t.length;a<c;a++)i=(s=t[a])[0]>>m.rshift,e=s[1]>>m.rshift,o=s[2]>>m.rshift,n[r=D(i,e,o)]=(n[r]||0)+1;return n},h=function(t,o){var e,n,r,s,i,a,c,u,h,l,g,f;for(r=a=l=1e6,g=n=i=h=0,f=t.length;g<f;g++)(u=(c=t[g])[0]>>m.rshift)<l?l=u:h<u&&(h=u),(s=c[1]>>m.rshift)<a?a=s:i<s&&(i=s),(e=c[2]>>m.rshift)<r?r=e:n<e&&(n=e);return new d(l,h,a,i,r,n,o)},g=function(t,g){var o,e,n,r,s,f,i,d,a,c,u,p,h,l,b,m,v,w,C,y,k,j,x,P,M,z,_,H,L,O;if(g.count()){if(1===g.count())return[g.copy()];if(c=g.r2-g.r1+1,s=g.g2-g.g1+1,e=g.b2-g.b1+1,i=Math.max(c,s,e),p=0,d=[],f=[],i===c)for(a=h=g.r1,j=g.r2;h<=j;a=h+=1){for(u=0,r=l=g.g1,_=g.g2;l<=_;r=l+=1)for(o=b=g.b1,H=g.b2;b<=H;o=b+=1)u+=t[D(a,r,o)]||0;p+=u,d[a]=p}else if(i===s)for(r=m=g.g1,L=g.g2;m<=L;r=m+=1){for(u=0,a=v=g.r1,O=g.r2;v<=O;a=v+=1)for(o=w=g.b1,x=g.b2;w<=x;o=w+=1)u+=t[D(a,r,o)]||0;p+=u,d[r]=p}else for(o=C=g.b1,P=g.b2;C<=P;o=C+=1){for(u=0,a=y=g.r1,M=g.r2;y<=M;a=y+=1)for(r=k=g.g1,z=g.g2;k<=z;r=k+=1)u+=t[D(a,r,o)]||0;p+=u,d[o]=p}return d.forEach(function(t,o){return f[o]=p-t}),n=function(t){var o,e,n,r,s,i,a,c,u,h,l;for(i=t+"2",a=h=g[s=t+"1"],l=g[i];h<=l;a=h+=1)if(d[a]>p/2){for(o=g.copy(),e=g.copy(),r=(c=a-g[s])<=(u=g[i]-a)?Math.min(g[i]-1,~~(a+u/2)):Math.max(g[s],~~(a-1-c/2));!d[r];)r++;for(n=f[r];!n&&d[r-1];)n=f[--r];return o[i]=r,e[s]=o[i]+1,[o,e]}},i===c?n("r"):i===s?n("g"):i===e?n("b"):void 0}},m.prototype.quantize=function(t,o){var a,e,c,n,r,s,u=this;if(!t.length||o<2||256<o)return console.log("invalid arguments"),!1;for(c=l(t),a=h(t,c),(r=new PriorityQueue(function(t,o){var e,n;return e=t.count(),(n=o.count())<e?1:e<n?-1:0})).push(a),(n=function(t,o){var e,n,r,s,i;for(s=1,i=0;i<u.maxIterations;)if((a=t.pop()).count()){if(e=(r=g(c,a))[0],n=r[1],!e)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(e),n&&(t.push(n),s++),o<=s)return;if(i++>u.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(a),i++})(r,this.fractByPopulations*o),s=new PriorityQueue(function(t,o){var e,n;return e=t.count()*t.volume(),(n=o.count()*o.volume())<e?1:e<n?-1:0});r.size();)s.push(r.pop());for(n(s,o-s.size()),e=new i;s.size();)e.push(s.pop());return e},m}.call(this),function(){window.ColorExtract=function(){function b(){}return b.getColorMap=function(t,o,e,n,r,s){var i,a,c,u,h,l,g,f,d,p;for(null==s&&(s=8),c=t.getContext("2d").getImageData(o,e,n,r).data,u=[],l=g=e,d=e+r;g<d;l=g+=1)for(a=l*n*4,h=f=o,p=o+n;f<p;h=f+=1)i=a+4*h,u.push([c[i],c[i+1],c[i+2]]);return(new MMCQ).quantize(u,s)},b.colorDist=function(t,o){var e;return(e=function(t){return t*t})(t[0]-o[0])+e(t[1]-o[1])+e(t[2]-o[2])},b.extract=function(t,o,e){var n,r,s,i,a,c,u,h,l,g,f,d,p;for(o.width=25,o.height=25,o.getContext("2d").drawImage(t,0,0,o.width,o.height),(r=b.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),n=r[0].rgb,(u=b.getColorMap(o,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),g=h=0,d=u.length;g<d;g++)s=u[g],h<(i=b.colorDist(n,s.rgb))&&(h=i,a=s.rgb);for(f=h=0,p=u.length;f<p;f++)s=u[f],h<(i=b.colorDist(n,s.rgb))&&s.rgb!==a&&(h=i,c=s.rgb);return e({bgColor:(l=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(n),fgColor:l(a),fgColor2:l(c)})},b}()}.call(this),function(g){var o=g("html").hasClass("editmode"),t=g("body").hasClass("bgpicker-fallback"),e=function(n,r,s){var i;return function(){var t=this,o=arguments,e=s&&!i;clearTimeout(i),i=setTimeout(function(){i=null,s||n.apply(t,o)},r),e&&n.apply(t,o)}},n=function(){var t=g(window).width();windowHeight=g(window).height(),searchModal=g(".js-voog-search-modal"),searchModalHeight=1400<=t?windowHeight-190:windowHeight-171,searchModal.css({"max-height":searchModalHeight})},r=function(){g(".js-container");var t,o,e,n=g(".js-topbar"),r=g(".js-header"),s=g(".js-menu-tags"),i=g(n).outerHeight(),a=g(r).outerHeight()+150;g(s).outerHeight();g(n).css({top:-i}),g(window).on("scroll",function(){g(window).scrollTop()<=0&&g(n).css({top:-i}),t?(o=g(window).scrollTop(),(e=o-t)<-5&&a<t?(g("body").hasClass("edy-checkout-button-visible")?headerOffset=g(".edy-ecommerce-shopping-cart-button").outerHeight():headerOffset=0,g(n).css({top:headerOffset})):(e<0&&t<a||0<e&&a<t)&&(s.hasClass("expanded")&&(g(s).removeClass("expanded"),g(".js-tags-btn").removeClass("open")),g(n).css({top:-i})),t=0):t=g(window).scrollTop()})};handleLayoutPositioning=function(){var t=g(".js-container");containerWrap=t.find(".js-wrap"),footer=g(".js-footer"),footerInner=g(".js-footer-inner"),footerGradientHeight=85,editmodePanelHeight=40,windowHeight=windowHeight=o?g(window).height()-editmodePanelHeight:g(window).height(),brakePoint=2*footer.innerHeight()-footerGradientHeight+containerWrap.innerHeight(),brakePoint>windowHeight?t.addClass("container-long"):t.removeClass("container-long")};var f=function(t,o){.6<o?g(t).find(".js-background-type").addClass("light-background").removeClass("dark-background"):g(t).find(".js-background-type").addClass("dark-background").removeClass("light-background")},s=function(t,o){return function(e,n){if(e&&n){"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),g.each(e,function(t,o){e[t]=+o})),"string"==typeof n&&(n=n.replace(/rgba?\(/,"").replace(/\)/,"").split(","),g.each(n,function(t,o){n[t]=+o})),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1),"object"==typeof n&&n.hasOwnProperty("length")&&3==n.length&&n.push(1);var t=[0,0,0,0];return t[3]=1-(1-n[3])*(1-e[3]),0===t[3]&&(t[3]=1e-6),t[0]=Math.min(n[0]*n[3]/t[3]+e[0]*e[3]*(1-n[3])/t[3],255),t[1]=Math.min(n[1]*n[3]/t[3]+e[1]*e[3]*(1-n[3])/t[3],255),t[2]=Math.min(n[2]*n[3]/t[3]+e[2]*e[3]*(1-n[3])/t[3],255),g.map(t,function(t){return Math.floor(t)})}}(t||[255,255,255,1],o||[255,255,255,1])},d=function(t,o){var e=s(t,o);return Math.round((.2126*+e[0]+.7152*+e[1]+.0722*+e[2])/2.55)/100},i=function(){document.addEventListener("edicy:customstyles:change",function(t){var o=["--header-mainmenu-font-size","--header-mainmenu-line-height","--header-mainmenu-line-height","--font-two"];0<Object.keys(t.detail.changes).filter(function(t){return-1<o.indexOf(t)}).length&&r()})};window.site=g.extend(window.site||{},{toggleFlags:function(){g(".js-option-toggle-flags").on("click",function(t){if(t.stopPropagation(),g(this).hasClass("js-flag-disable-btn"))var o=!1;else o=!0;g(this).toggleClass("js-flag-disable-btn"),g(".js-header").toggleClass("flags-enabled flags-disabled"),siteData.set("flags_state",o)})},bgPickerPreview:function(o,t,e,n){var r=g(o).find(".js-background-image").css("background-image"),s=t.imageSizes?function(t,o){for(var e,n=0,r=t.length;n<r;n++){if(t[n].width<o)return e||t[n];e=t[n]}return t[t.length-1]}(t.imageSizes,g(window).width()):null,i=t.image&&""!==t.image?"url("+s.url+")":"none",a=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,c=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",u=(t.colorData&&""!==t.colorData&&t.colorData.lightness,g("<img>")),h=g("<canvas>"),l=t.image&&""!==t.image?t.image:null;l?function(t,o){for(var e=t.length;e--;)if(-1<o.indexOf(t[e].url.trim()))return!0;return!1}(a,r)?(e.imageColor=e.imageColor?e.imageColor:n,e.combinedLightness=d(e.imageColor,c),f(o,e.combinedLightness)):(u.attr("src",l.replace(/.*\/(photos|voogstock)/g,"/photos")),u.on("load",function(){ColorExtract.extract(u[0],h[0],function(t){e.imageColor=t.bgColor?t.bgColor:"rgba(255,255,255,1)",e.combinedLightness=d(e.imageColor,c),f(o,e.combinedLightness)})})):(e.imageColor="rgba(255,255,255,1)",e.combinedLightness=d(e.imageColor,c),f(o,e.combinedLightness)),g(o).find(".js-background-image").css({"background-image":i}),g(o).find(".js-background-color").css({"background-color":c})},bgPickerCommit:function(t,o,e,n){var r=g.extend(!0,{},o);r.image=o.image||"",r.imageSizes=o.imageSizes||"",r.color=o.color||"",r.combinedLightness=e.combinedLightness,"articlePage"===n?Edicy.articles.currentArticle.setData(t,r):pageData.set(t,r)},bgPickerColorScheme:function(t){void 0!==t&&(.6<t?g(".header-wrapper").addClass("light").removeClass("dark"):g(".header-wrapper").addClass("dark").removeClass("light"))},initFrontPage:function(){},initCommonPage:function(){r(),i()},initBlogPage:function(){r(),i()},initPostPage:function(){r(),i()}}),t&&function(){if(color=g(".js-body-background-color").css("background-color"),"rgba(0, 0, 0, 0)"===color||"transparent"===color)g(document).ready(function(){g(".js-background-type").addClass("dark-background").removeClass("light-background"),g(".js-background-type").addClass("light-background").removeClass("dark-background")});else if(color){var t=function(t){if(t&&"string"==typeof t){var o=t.match(/(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*([\d\.]+)?\s*)/);return o?{r:+o[2],g:+o[3],b:+o[4],a:o[5]?+o[5]:1}:void 0}}(color),o=t.r+t.g+t.b;0<o+t.a&&128<o/3?g(".js-background-type").addClass("light-background").removeClass("dark-background"):g(".js-background-type").addClass("dark-background").removeClass("light-background")}}(),g("html").click(function(){g(".js-btn").hasClass("open")&&g(".js-btn").removeClass("open"),g(".js-popover").hasClass("expanded")&&g(".js-popover").removeClass("expanded"),g(".js-search-inner").hasClass("active")&&g(".js-search-inner").removeClass("active")}),g(".js-menu-btn").click(function(t){t.stopPropagation(),g(this).toggleClass("open"),g(".js-menu-main").toggleClass("expanded"),g(".js-search-close-btn").hasClass("open")&&g(".js-search-close-btn").trigger("click")}),g(".js-menu-lang-btn").click(function(t){t.stopPropagation(),g(".js-menu-lang-btn").toggleClass("open"),g(".js-menu-lang").toggleClass("expanded")}),g(".js-tags-btn").click(function(t){t.stopPropagation(),g(this).toggleClass("open"),g(".js-menu-tags").toggleClass("expanded")}),g(".js-search").click(function(){g(".js-search-close-btn").trigger("click")}),g(".js-search-open-btn").click(function(t){t.stopPropagation(),g(".js-menu-btn").hasClass("open")&&g(".js-menu-btn").trigger("click"),g("html").addClass("search-open"),g(this).addClass("open"),g(".js-search-close-btn").addClass("open"),g(".js-search").addClass("active"),g(".js-search-input").val("").focus()}),g(".js-search-close-btn").click(function(t){t.stopPropagation(),g("html").removeClass("search-open"),g(".js-search-open-btn, .js-search-close-btn").removeClass("open"),g(".js-search").removeClass("active"),g(".js-voog-search-modal").removeClass("search-results-active")}),g(".js-search-form, .js-voog-search-modal").click(function(t){t.stopPropagation()}),handleLayoutPositioning(),function(){if(function(){for(var t=["WebKit","Moz","O","Ms",""],o=0;o<t.length;o++)if(t[o]+"MutationObserver"in window)return window[t[o]+"MutationObserver"];return!1}()){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,o=document.querySelector(".js-wrap"),e=document.querySelector(".js-footer-inner"),n={attributes:!0,childList:!0,subtree:!0},r=new t(function(t){t.forEach(function(t){handleLayoutPositioning()})});r.observe(o,n),r.observe(e,n)}else setInterval(function(){handleLayoutPositioning()},1e3)}(),g(".js-search-form").on("submit",function(){n()}),g(document).ready(function(){g(".comment-form").hasClass("form_with_errors")?g("html, body").scrollTop(g(".comment-form").offset().top):0<g("form").find(".form_error, .form_notice").length&&g("html, body").scrollTop(g(".form_error, .form_notice").closest("form").offset().top)}),g(window).resize(function(){g(window).resize(e(r,500)),g(window).resize(e(handleLayoutPositioning,500)),g(window).resize(e(n,500))}),!1===o&&g.each(g(".content-formatted"),function(){g(this).hasClass("js-custom-content-formatted")||g(this).find("table").wrap('<div class="table-container overthrow"></div>')})}(jQuery);